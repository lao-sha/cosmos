# Stardust åŒºå—é“¾åŠŸèƒ½æµ‹è¯•å¥—ä»¶

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æµ‹è¯•å‘½ä»¤è¯¦è§£](#æµ‹è¯•å‘½ä»¤è¯¦è§£)
- [æµ‹è¯•æ¨¡å—è¯´æ˜](#æµ‹è¯•æ¨¡å—è¯´æ˜)
- [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [æµ‹è¯•è´¦æˆ·](#æµ‹è¯•è´¦æˆ·)
- [æµ‹è¯•è¾“å‡ºè§£è¯»](#æµ‹è¯•è¾“å‡ºè§£è¯»)
- [å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤](#å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤)
- [æ‰©å±•å¼€å‘æŒ‡å—](#æ‰©å±•å¼€å‘æŒ‡å—)

---

## é¡¹ç›®æ¦‚è¿°

### ä»€ä¹ˆæ˜¯ Stardust æµ‹è¯•å¥—ä»¶ï¼Ÿ

è¿™æ˜¯ä¸€å¥—ä¸“é—¨ä¸º Stardust åŒºå—é“¾è®¾è®¡çš„è‡ªåŠ¨åŒ–åŠŸèƒ½æµ‹è¯•è„šæœ¬ï¼ŒåŸºäº TypeScript ç¼–å†™ï¼Œä½¿ç”¨ `@polkadot/api` ä¸åŒºå—é“¾èŠ‚ç‚¹è¿›è¡Œäº¤äº’ã€‚

### æµ‹è¯•è¦†ç›–èŒƒå›´

æµ‹è¯•å¥—ä»¶å®Œæ•´è¦†ç›– Stardust åŒºå—é“¾çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼š

| åˆ†ç±» | æ¨¡å— | è¯´æ˜ |
|------|------|------|
| **åŸºç¡€è®¾æ–½** | System, Balances, Timestamp | èŠ‚ç‚¹è¿æ¥ã€è´¦æˆ·ä½™é¢ã€æ—¶é—´æˆ³ |
| **å åœç³»ç»Ÿ** | Almanac, Bazi, Liuyao, Meihua, Qimen, Ziwei, Tarot ç­‰ | ä¸­å›½ä¼ ç»Ÿæœ¯æ•°å’Œè¥¿æ–¹å åœ |
| **èŠå¤©ç›´æ’­** | ChatCore, ChatGroup, Livestream | å³æ—¶é€šè®¯ã€ç¾¤èŠã€ç›´æ’­åŠŸèƒ½ |
| **äº¤æ˜“ç³»ç»Ÿ** | TradingMaker, TradingOtc, TradingSwap | åšå¸‚å•†ã€åœºå¤–äº¤æ˜“ã€ä»£å¸å…‘æ¢ |
| **è¾…åŠ©åŠŸèƒ½** | Escrow, Arbitration, Evidence, Referral | æ‰˜ç®¡ã€ä»²è£ã€è¯æ®ã€æ¨è |

### æµ‹è¯•è„šæœ¬ç‰¹ç‚¹

- âœ… **å…¨è¦†ç›–**: æµ‹è¯•æ‰€æœ‰å·²æ³¨å†Œçš„ Pallet æ¨¡å—
- âœ… **è‡ªåŠ¨åŒ–**: ä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•
- âœ… **æ¨¡å—åŒ–**: å¯å•ç‹¬è¿è¡ŒæŸä¸ªæ¨¡å—çš„æµ‹è¯•
- âœ… **è¯¦ç»†æŠ¥å‘Š**: å½©è‰²è¾“å‡ºï¼Œæ¸…æ™°çš„æµ‹è¯•ç»“æœ
- âœ… **å®¹é”™è®¾è®¡**: æŸäº›æ–¹æ³•ä¸å¯ç”¨æ—¶è‡ªåŠ¨è·³è¿‡

---

## ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux (æ¨è Ubuntu 20.04+)
- **Node.js**: v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: v9.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Rust**: å·²ç¼–è¯‘çš„ Stardust åŒºå—é“¾èŠ‚ç‚¹

### æ£€æŸ¥ Node.js ç‰ˆæœ¬

```bash
node --version
# è¾“å‡ºåº”è¯¥æ˜¯ v18.x.x æˆ–æ›´é«˜

npm --version
# è¾“å‡ºåº”è¯¥æ˜¯ 9.x.x æˆ–æ›´é«˜
```

### æ£€æŸ¥åŒºå—é“¾èŠ‚ç‚¹

ç¡®ä¿å·²ç»ç¼–è¯‘äº† Stardust åŒºå—é“¾èŠ‚ç‚¹ï¼š

```bash
ls -la /home/xiaodong/æ¡Œé¢/stardust/target/release/solochain-template-node
```

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦å…ˆç¼–è¯‘ï¼š

```bash
cd /home/xiaodong/æ¡Œé¢/stardust
cargo build --release
```

---

## å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–

```bash
# è¿›å…¥è„šæœ¬ç›®å½•
cd /home/xiaodong/æ¡Œé¢/stardust/script

# å®‰è£… npm ä¾èµ–
npm install
```

å®‰è£…å®Œæˆåï¼Œä½ ä¼šçœ‹åˆ° `node_modules` ç›®å½•è¢«åˆ›å»ºã€‚

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åŒºå—é“¾èŠ‚ç‚¹

æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œå¯åŠ¨å¼€å‘èŠ‚ç‚¹ï¼š

```bash
cd /home/xiaodong/æ¡Œé¢/stardust

# å¯åŠ¨å¼€å‘æ¨¡å¼èŠ‚ç‚¹ï¼ˆæ•°æ®å­˜åœ¨ä¸´æ—¶ç›®å½•ï¼Œé‡å¯åæ¸…ç©ºï¼‰
./target/release/solochain-template-node --dev --tmp
```

**èŠ‚ç‚¹å¯åŠ¨å‚æ•°è¯´æ˜ï¼š**
- `--dev`: ä½¿ç”¨å¼€å‘é“¾é…ç½®ï¼ŒåŒ…å«é¢„ç½®çš„æµ‹è¯•è´¦æˆ·
- `--tmp`: æ•°æ®å­˜å‚¨åœ¨ä¸´æ—¶ç›®å½•ï¼ŒèŠ‚ç‚¹åœæ­¢åè‡ªåŠ¨æ¸…ç©º

ç­‰å¾…çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹è¾“å‡ºï¼Œè¡¨ç¤ºèŠ‚ç‚¹å·²å¯åŠ¨ï¼š

```
2024-01-19 12:00:00 Substrate Node
2024-01-19 12:00:00 âœŒï¸  version 0.1.0-xxx
2024-01-19 12:00:00 ğŸ“‹ Chain specification: Development
2024-01-19 12:00:00 ğŸ·  Node name: ...
2024-01-19 12:00:00 ğŸ’¾ Database: RocksDb at /tmp/...
2024-01-19 12:00:00 Idle
```

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œæµ‹è¯•

åœ¨åŸæ¥çš„ç»ˆç«¯çª—å£ï¼ˆè„šæœ¬ç›®å½•ï¼‰è¿è¡Œæµ‹è¯•ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test
```

---

## æµ‹è¯•å‘½ä»¤è¯¦è§£

### åŸºæœ¬å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `npm test` | è¿è¡Œæ‰€æœ‰æµ‹è¯•æ¨¡å— |
| `npm run test:all` | åŒä¸Šï¼Œè¿è¡Œæ‰€æœ‰æµ‹è¯• |

### æŒ‰æ¨¡å—è¿è¡Œæµ‹è¯•

| å‘½ä»¤ | æµ‹è¯•å†…å®¹ |
|------|---------|
| `npm run test:infrastructure` | åŸºç¡€è®¾æ–½æµ‹è¯•ï¼ˆèŠ‚ç‚¹è¿æ¥ã€Pallet å¯ç”¨æ€§ï¼‰ |
| `npm run test:balances` | ä½™é¢å’Œè½¬è´¦æµ‹è¯• |
| `npm run test:divination` | å åœç³»ç»Ÿæµ‹è¯•ï¼ˆå…«å­—ã€å…­çˆ»ã€æ¢…èŠ±ç­‰ï¼‰ |
| `npm run test:chat` | èŠå¤©å’Œç›´æ’­ç³»ç»Ÿæµ‹è¯• |
| `npm run test:trading` | äº¤æ˜“ç³»ç»Ÿæµ‹è¯•ï¼ˆåšå¸‚å•†ã€OTCï¼‰ |
| `npm run test:escrow` | æ‰˜ç®¡å’Œä»²è£ç³»ç»Ÿæµ‹è¯• |
| `npm run test:governance` | æ²»ç†å’Œç³»ç»Ÿæ¨¡å—æµ‹è¯• |
| `npm run test:workflow` | å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯• |

### å¿«æ·å‘½ä»¤ï¼ˆç›´æ¥è¿è¡Œå•ä¸ªæ–‡ä»¶ï¼‰

| å‘½ä»¤ | å¯¹åº”æ–‡ä»¶ |
|------|---------|
| `npm run test:infra` | test-infrastructure.ts |
| `npm run test:balance` | test-balances.ts |
| `npm run test:divine` | test-divination.ts |
| `npm run test:live` | test-chat.ts |
| `npm run test:trade` | test-trading.ts |
| `npm run test:arb` | test-escrow-arbitration.ts |
| `npm run test:gov` | test-governance.ts |
| `npm run test:flow` | test-workflows.ts |

### ä½¿ç”¨ npx ç›´æ¥è¿è¡Œ

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npx tsx run-all-tests.ts

# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ˜¾å¼å‚æ•°ï¼‰
npx tsx run-all-tests.ts --all

# ä»…è¿è¡ŒåŸºç¡€è®¾æ–½æµ‹è¯•
npx tsx run-all-tests.ts --infrastructure

# ä»…è¿è¡Œå åœæµ‹è¯•
npx tsx run-all-tests.ts --divination

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
npx tsx run-all-tests.ts --help
```

---

## æµ‹è¯•æ¨¡å—è¯´æ˜

### 1. åŸºç¡€è®¾æ–½æµ‹è¯• (test-infrastructure.ts)

**æµ‹è¯•ç›®çš„**: éªŒè¯åŒºå—é“¾èŠ‚ç‚¹çš„åŸºæœ¬åŠŸèƒ½å’Œæ‰€æœ‰ Pallet æ¨¡å—çš„å¯ç”¨æ€§ã€‚

**æµ‹è¯•å†…å®¹**:

| æµ‹è¯•é¡¹ | è¯´æ˜ |
|--------|------|
| èŠ‚ç‚¹è¿æ¥æµ‹è¯• | éªŒè¯ WebSocket è¿æ¥æ˜¯å¦æ­£å¸¸ |
| é“¾ä¿¡æ¯è·å– | è·å–é“¾åç§°ã€èŠ‚ç‚¹ç‰ˆæœ¬ã€èŠ‚ç‚¹åç§° |
| è¿è¡Œæ—¶ç‰ˆæœ¬ | æ£€æŸ¥ spec_name æ˜¯å¦ä¸º "stardust" |
| åŒºå—ç”Ÿæˆ | éªŒè¯åŒºå—é«˜åº¦æ­£åœ¨å¢é•¿ |
| æœ€ç»ˆåŒºå— | æ£€æŸ¥ finalized block |
| Pallet å¯ç”¨æ€§ | æ£€æŸ¥æ‰€æœ‰ 25+ ä¸ª Pallet æ˜¯å¦å·²æ³¨å†Œ |
| èŠ‚ç‚¹å¥åº·æ£€æŸ¥ | æ£€æŸ¥åŒæ­¥çŠ¶æ€å’Œè¿æ¥çŠ¶æ€ |

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:infrastructure
```

### 2. ä½™é¢å’Œè½¬è´¦æµ‹è¯• (test-balances.ts)

**æµ‹è¯•ç›®çš„**: éªŒè¯ Balances æ¨¡å—çš„æ‰€æœ‰åŠŸèƒ½ã€‚

**æµ‹è¯•å†…å®¹**:

| æµ‹è¯•é¡¹ | è¯´æ˜ |
|--------|------|
| ä½™é¢æŸ¥è¯¢ | æŸ¥è¯¢ Aliceã€Bob ç­‰è´¦æˆ·ä½™é¢ |
| å•ç¬”è½¬è´¦ | Alice å‘ Charlie è½¬è´¦ |
| æ‰¹é‡è½¬è´¦ | ä½¿ç”¨ utility.batch æ‰¹é‡è½¬è´¦ |
| è½¬è´¦ 0 æµ‹è¯• | éªŒè¯è½¬è´¦é‡‘é¢ä¸º 0 çš„è¡Œä¸º |
| ä½™é¢ä¸è¶³æµ‹è¯• | éªŒè¯ä½™é¢ä¸è¶³æ—¶çš„é”™è¯¯å¤„ç† |
| å­˜åœ¨æ€§å­˜æ¬¾ | æŸ¥è¯¢ Existential Deposit |
| è½¬è´¦äº‹ä»¶ | éªŒè¯ Transfer äº‹ä»¶æ˜¯å¦æ­£ç¡®è§¦å‘ |
| Nonce æŸ¥è¯¢ | æŸ¥è¯¢è´¦æˆ·äº¤æ˜“åºå· |

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:balances
```

### 3. å åœç³»ç»Ÿæµ‹è¯• (test-divination.ts)

**æµ‹è¯•ç›®çš„**: éªŒè¯æ‰€æœ‰å åœç›¸å…³æ¨¡å—çš„åŠŸèƒ½ã€‚

**æµ‹è¯•çš„å åœæ¨¡å—**:

| æ¨¡å— | ä¸­æ–‡å | æµ‹è¯•å†…å®¹ |
|------|--------|---------|
| Almanac | é»„å† | æŸ¥è¯¢å½“å‰å†œå†æ—¥æœŸ |
| Bazi | å…«å­— | åˆ›å»ºå’ŒæŸ¥è¯¢å…«å­—å‘½ç›˜ |
| Liuyao | å…­çˆ» | å…­çˆ»å¦è±¡å åœ |
| Meihua | æ¢…èŠ±æ˜“æ•° | æ¢…èŠ±å¦è±¡èµ·å¦ |
| Qimen | å¥‡é—¨éç”² | å¥‡é—¨ç›˜æ’å¸ƒ |
| Ziwei | ç´«å¾®æ–—æ•° | ç´«å¾®å‘½ç›˜åˆ›å»º |
| Tarot | å¡”ç½—ç‰Œ | å¡”ç½—ç‰ŒæŠ½å– |
| Xiaoliuren | å°å…­å£¬ | å°å…­å£¬å åœ |
| Daliuren | å¤§å…­å£¬ | å¤§å…­å£¬å è¯¾ |
| DivinationMarket | å åœå¸‚åœº | æ³¨å†Œå åœå¸ˆã€æœåŠ¡åˆ—è¡¨ |
| DivinationNft | å åœNFT | NFT é›†åˆæŸ¥è¯¢ |
| DivinationAi | AIå åœ | AI æœåŠ¡æä¾›è€…æŸ¥è¯¢ |
| Privacy | éšç§è®¾ç½® | ç”¨æˆ·éšç§é…ç½® |

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:divination
```

### 4. èŠå¤©/ç›´æ’­æµ‹è¯• (test-chat.ts)

**æµ‹è¯•ç›®çš„**: éªŒè¯èŠå¤©å’Œç›´æ’­ç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ã€‚

**æµ‹è¯•å†…å®¹**:

| æ¨¡å— | æµ‹è¯•é¡¹ |
|------|--------|
| **ChatPermission** | æŸ¥è¯¢æƒé™é…ç½®ã€è®¾ç½®ç”¨æˆ·æƒé™ |
| **ChatCore** | å‘é€ç§èŠæ¶ˆæ¯ã€æŸ¥è¯¢æ¶ˆæ¯å†å² |
| **ChatGroup** | åˆ›å»ºç¾¤ç»„ã€åŠ å…¥ç¾¤ç»„ã€å‘é€ç¾¤æ¶ˆæ¯ã€æŸ¥è¯¢ç¾¤æˆå‘˜ |
| **Livestream** | åˆ›å»ºç›´æ’­é—´ã€å¼€å§‹/ç»“æŸç›´æ’­ã€åŠ å…¥è§‚çœ‹ã€å‘é€ç¤¼ç‰© |

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:chat
```

### 5. äº¤æ˜“ç³»ç»Ÿæµ‹è¯• (test-trading.ts)

**æµ‹è¯•ç›®çš„**: éªŒè¯ OTC äº¤æ˜“å’Œåšå¸‚å•†ç³»ç»Ÿçš„åŠŸèƒ½ã€‚

**æµ‹è¯•å†…å®¹**:

| æ¨¡å— | æµ‹è¯•é¡¹ |
|------|--------|
| **TradingPricing** | æŸ¥è¯¢å½“å‰ä»·æ ¼ã€ä»·æ ¼å‚æ•°é…ç½® |
| **TradingCredit** | æŸ¥è¯¢ç”¨æˆ·ä¿¡ç”¨åˆ†ã€ä¿¡ç”¨ç­‰çº§ |
| **TradingMaker** | æ³¨å†Œåšå¸‚å•†ã€æ›´æ–°ä¿¡æ¯ã€æŸ¥è¯¢è¯¦æƒ… |
| **TradingOtc** | åˆ›å»ºé¦–è´­è®¢å•ã€æ ‡è®°å·²ä»˜æ¬¾ã€é‡Šæ”¾ä»£å¸ã€å–æ¶ˆè®¢å• |
| **TradingSwap** | æŸ¥è¯¢å…‘æ¢æ± ã€æ‰§è¡Œä»£å¸å…‘æ¢ |

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:trading
```

### 6. æ‰˜ç®¡/ä»²è£æµ‹è¯• (test-escrow-arbitration.ts)

**æµ‹è¯•ç›®çš„**: éªŒè¯æ‰˜ç®¡ã€ä»²è£å’Œè¾…åŠ©åŠŸèƒ½æ¨¡å—ã€‚

**æµ‹è¯•å†…å®¹**:

| æ¨¡å— | æµ‹è¯•é¡¹ |
|------|--------|
| **Escrow** | åˆ›å»ºæ‰˜ç®¡ã€é‡Šæ”¾æ‰˜ç®¡ã€å–æ¶ˆæ‰˜ç®¡ |
| **Evidence** | æäº¤è¯æ®ã€æŸ¥è¯¢è¯æ®è¯¦æƒ… |
| **Arbitration** | å‘èµ·ä»²è£ã€æäº¤ç­”è¾©ã€æŸ¥è¯¢æ¡ˆä»¶ |
| **AffiliateReferral** | ç»‘å®šæ¨èäººã€æŸ¥è¯¢/é¢†å–æ¨èå¥–åŠ± |
| **StardustIpfs** | å­˜å‚¨ IPFS å“ˆå¸Œã€æŸ¥è¯¢å­˜å‚¨çŠ¶æ€ |

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:escrow
```

### 7. æ²»ç†å’Œç³»ç»Ÿæ¨¡å—æµ‹è¯• (test-governance.ts)

**æµ‹è¯•ç›®çš„**: éªŒè¯å…±è¯†ã€äº¤æ˜“è´¹ç”¨ã€TEE éšç§å’Œå§”å‘˜ä¼šæ²»ç†æ¨¡å—ã€‚

**æµ‹è¯•å†…å®¹**:

| æ¨¡å— | æµ‹è¯•é¡¹ |
|------|--------|
| **Aura** | æŸ¥è¯¢éªŒè¯è€…ã€å½“å‰ Slot |
| **Grandpa** | æŸ¥è¯¢æœ€ç»ˆæ€§çŠ¶æ€ã€éªŒè¯è€…é›†åˆ |
| **TransactionPayment** | æŸ¥è¯¢è´¹ç”¨é…ç½®ã€è´¹ç”¨å¸¸é‡ |
| **TeePrivacy** | æŸ¥è¯¢ TEE èŠ‚ç‚¹ã€æ³¨å†ŒèŠ‚ç‚¹ã€æäº¤åŠ å¯†æ•°æ® |
| **TechnicalCommittee** | æŸ¥è¯¢æˆå‘˜ã€åˆ›å»ºææ¡ˆã€æŠ•ç¥¨ |
| **TechnicalMembership** | æˆå‘˜ç®¡ç†ã€æ·»åŠ /ç§»é™¤æˆå‘˜ |
| **ArbitrationCommittee** | æŸ¥è¯¢ä»²è£å§”å‘˜ä¼šçŠ¶æ€ |
| **ArbitrationMembership** | ä»²è£å§”å‘˜ä¼šæˆå‘˜ç®¡ç† |
| **TreasuryCouncil** | æŸ¥è¯¢è´¢åŠ¡å§”å‘˜ä¼šçŠ¶æ€ |
| **TreasuryMembership** | è´¢åŠ¡å§”å‘˜ä¼šæˆå‘˜ç®¡ç† |
| **ContentCommittee** | æŸ¥è¯¢å†…å®¹å§”å‘˜ä¼šçŠ¶æ€ |
| **ContentMembership** | å†…å®¹å§”å‘˜ä¼šæˆå‘˜ç®¡ç† |

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:governance
```

### 8. å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯• (test-workflows.ts)

**æµ‹è¯•ç›®çš„**: ç«¯åˆ°ç«¯éªŒè¯ä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§å’Œåˆç†æ€§ã€‚

**æµ‹è¯•å†…å®¹**:

| æµç¨‹ç±»å‹ | æµ‹è¯•é¡¹ |
|----------|--------|
| **è½¬è´¦æµç¨‹** | å®Œæ•´è½¬è´¦éªŒè¯ï¼ˆä½™é¢å˜åŒ–ï¼‰ã€ä½™é¢ä¸è¶³å¤±è´¥æµ‹è¯• |
| **æ‰¹é‡æ“ä½œ** | æ‰¹é‡è½¬è´¦ã€å¤šæ¥æ”¶è€…ä½™é¢éªŒè¯ |
| **OTCæµç¨‹** | åšå¸‚å•†æ³¨å†Œâ†’åˆ›å»ºè®¢å•â†’ä»˜æ¬¾â†’é‡Šæ”¾ä»£å¸ |
| **ç¾¤èŠæµç¨‹** | åˆ›å»ºç¾¤ç»„â†’åŠ å…¥â†’å‘æ¶ˆæ¯â†’éªŒè¯æˆå‘˜ |
| **ç›´æ’­æµç¨‹** | åˆ›å»ºç›´æ’­â†’å¼€æ’­â†’è§‚ä¼—åŠ å…¥â†’é€ç¤¼ç‰©â†’ç»“æŸ |
| **æ‰˜ç®¡æµç¨‹** | åˆ›å»ºæ‰˜ç®¡â†’ç­‰å¾…â†’é‡Šæ”¾â†’éªŒè¯èµ„é‡‘åˆ°è´¦ |
| **å åœæµç¨‹** | åˆ›å»ºå‘½ç›˜â†’æŸ¥è¯¢è¯¦æƒ…â†’è¯·æ±‚è§£è¯» |
| **è¾¹ç•Œæ¡ä»¶** | å­˜åœ¨æ€§å­˜æ¬¾ã€è‡ªæˆ‘è½¬è´¦ã€æé™é‡‘é¢ |
| **å¹¶å‘æµ‹è¯•** | å¤šäº¤æ˜“å¹¶å‘æ‰§è¡Œã€å†²çªå¤„ç† |
| **çŠ¶æ€ä¸€è‡´æ€§** | ç³»ç»Ÿæ€»ä½™é¢å®ˆæ’éªŒè¯ |

**ç‰¹ç‚¹**:
- âœ… éªŒè¯æ“ä½œå‰åçš„çŠ¶æ€å˜åŒ–
- âœ… æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡ç”Ÿå‘½å‘¨æœŸ
- âœ… éªŒè¯è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ
- âœ… æµ‹è¯•å¤šæ­¥éª¤ä¾èµ–å…³ç³»
- âœ… éªŒè¯ä»£å¸æµè½¬çš„æ­£ç¡®æ€§

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:workflow
```

---

## æ–‡ä»¶ç»“æ„

```
/home/xiaodong/æ¡Œé¢/stardust/script/
â”‚
â”œâ”€â”€ package.json                    # npm é…ç½®å’Œè„šæœ¬å®šä¹‰
â”œâ”€â”€ package-lock.json              # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ node_modules/                  # npm ä¾èµ–ç›®å½•
â”‚
â”œâ”€â”€ README.md                      # æœ¬ä½¿ç”¨è¯´æ˜æ–‡æ¡£
â”‚
â”œâ”€â”€ test-utils.ts                  # æµ‹è¯•å·¥å…·åº“
â”‚   â”œâ”€â”€ API åˆå§‹åŒ–å‡½æ•°
â”‚   â”œâ”€â”€ æµ‹è¯•è´¦æˆ·è·å–
â”‚   â”œâ”€â”€ æ—¥å¿—è¾“å‡ºå‡½æ•°
â”‚   â”œâ”€â”€ äº¤æ˜“ç­¾åå’Œå‘é€
â”‚   â”œâ”€â”€ æ–­è¨€å‡½æ•°
â”‚   â””â”€â”€ æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
â”‚
â”œâ”€â”€ test-infrastructure.ts         # åŸºç¡€è®¾æ–½æµ‹è¯•
â”œâ”€â”€ test-balances.ts              # ä½™é¢å’Œè½¬è´¦æµ‹è¯•
â”œâ”€â”€ test-divination.ts            # å åœç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ test-chat.ts                  # èŠå¤©/ç›´æ’­æµ‹è¯•
â”œâ”€â”€ test-trading.ts               # äº¤æ˜“ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ test-escrow-arbitration.ts    # æ‰˜ç®¡/ä»²è£æµ‹è¯•
â”œâ”€â”€ test-governance.ts            # æ²»ç†å’Œç³»ç»Ÿæ¨¡å—æµ‹è¯•
â”œâ”€â”€ test-workflows.ts             # å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
â”‚
â”œâ”€â”€ run-all-tests.ts              # ä¸»å…¥å£è„šæœ¬
â”‚   â”œâ”€â”€ è§£æå‘½ä»¤è¡Œå‚æ•°
â”‚   â”œâ”€â”€ æŒ‰é¡ºåºè¿è¡Œæµ‹è¯•å¥—ä»¶
â”‚   â””â”€â”€ ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š
â”‚
â””â”€â”€ create-accounts-and-transfer.ts  # è´¦æˆ·åˆ›å»ºå’Œæ‰¹é‡è½¬è´¦å·¥å…·
```

---

## é…ç½®è¯´æ˜

### ä¿®æ”¹èŠ‚ç‚¹è¿æ¥åœ°å€

é»˜è®¤è¿æ¥åœ°å€æ˜¯ `ws://localhost:9944`ã€‚å¦‚éœ€ä¿®æ”¹ï¼Œç¼–è¾‘ `test-utils.ts` æ–‡ä»¶ï¼š

```typescript
// test-utils.ts ç¬¬ 15 è¡Œå·¦å³
export const DEFAULT_WS_ENDPOINT = 'ws://localhost:9944';

// ä¿®æ”¹ä¸ºå…¶ä»–åœ°å€ï¼Œä¾‹å¦‚ï¼š
export const DEFAULT_WS_ENDPOINT = 'ws://192.168.1.100:9944';
```

### ä¿®æ”¹æµ‹è¯•é‡‘é¢å•ä½

```typescript
// test-utils.ts ä¸­çš„å•ä½å®šä¹‰
export const UNIT = 1_000_000_000_000n; // 1 DUST = 10^12 units
```

### å¯ç”¨/ç¦ç”¨æµ‹è¯•å¥—ä»¶

åœ¨ `run-all-tests.ts` ä¸­ä¿®æ”¹ï¼š

```typescript
const testSuites: TestSuiteConfig[] = [
  {
    name: 'åŸºç¡€è®¾æ–½æµ‹è¯•',
    run: runInfrastructureTests,
    enabled: true,  // è®¾ä¸º false å¯ç¦ç”¨æ­¤å¥—ä»¶
  },
  // ...
];
```

---

## æµ‹è¯•è´¦æˆ·

æµ‹è¯•ä½¿ç”¨ Substrate å¼€å‘é“¾çš„é¢„ç½®è´¦æˆ·ï¼Œè¿™äº›è´¦æˆ·åœ¨ `--dev` æ¨¡å¼ä¸‹è‡ªåŠ¨åˆ›å»ºï¼š

### è´¦æˆ·åˆ—è¡¨

| è´¦æˆ·å | è¯´æ˜ | ä½™é¢ |
|--------|------|------|
| **Alice** | ä¸»æµ‹è¯•è´¦æˆ·ï¼Œä¹Ÿæ˜¯ Sudo è´¦æˆ· | å¤§é‡ä½™é¢ï¼ˆçº¦ 10^15 DUSTï¼‰ |
| **Bob** | æ¬¡æµ‹è¯•è´¦æˆ· | å¤§é‡ä½™é¢ |
| **Charlie** | æ™®é€šæµ‹è¯•è´¦æˆ· | è¾ƒå°‘ä½™é¢ |
| **Dave** | æ™®é€šæµ‹è¯•è´¦æˆ· | è¾ƒå°‘ä½™é¢ |
| **Eve** | æ™®é€šæµ‹è¯•è´¦æˆ· | è¾ƒå°‘ä½™é¢ |
| **Ferdie** | æ™®é€šæµ‹è¯•è´¦æˆ· | è¾ƒå°‘ä½™é¢ |

### è´¦æˆ·ç”¨é€”åˆ†é…

åœ¨æµ‹è¯•è„šæœ¬ä¸­ï¼Œå„è´¦æˆ·çš„ä½¿ç”¨åœºæ™¯ï¼š

| è´¦æˆ· | ç”¨é€” |
|------|------|
| Alice | è½¬è´¦å‘èµ·è€…ã€æ‰˜ç®¡åˆ›å»ºè€…ã€æ¨èäºº |
| Bob | è½¬è´¦æ¥æ”¶è€…ã€æ¶ˆæ¯æ¥æ”¶è€… |
| Charlie | åšå¸‚å•†æ³¨å†Œã€ç›´æ’­ä¸»æ’­ |
| Dave | OTC ä¹°å®¶ã€ç›´æ’­è§‚ä¼— |
| Eve | ç´«å¾®å‘½ç›˜æµ‹è¯•ã€å…‘æ¢æµ‹è¯• |
| Ferdie | å¡”ç½—ç‰Œæµ‹è¯•ã€æ¨èç»‘å®š |

### è·å–è´¦æˆ·åœ°å€

åœ¨æµ‹è¯•è„šæœ¬ä¸­ï¼š

```typescript
import { Keyring } from '@polkadot/api';

const keyring = new Keyring({ type: 'sr25519' });
const alice = keyring.addFromUri('//Alice');

console.log('Alice åœ°å€:', alice.address);
// è¾“å‡º: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY
```

---

## æµ‹è¯•è¾“å‡ºè§£è¯»

### è¾“å‡ºæ ¼å¼

æµ‹è¯•è¿è¡Œæ—¶ä¼šè¾“å‡ºå½©è‰²æ—¥å¿—ï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  åŸºç¡€è®¾æ–½æµ‹è¯•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ èŠ‚ç‚¹è¿æ¥æµ‹è¯• (5ms)                    â† ç»¿è‰²å‹¾å·è¡¨ç¤ºé€šè¿‡
âœ“ é“¾ä¿¡æ¯è·å–æµ‹è¯• (12ms)
  â†’ é“¾åç§°: Development                 â† é’è‰²ç®­å¤´è¡¨ç¤ºè¯¦ç»†ä¿¡æ¯
  â†’ èŠ‚ç‚¹ç‰ˆæœ¬: 4.0.0-dev
  â†’ èŠ‚ç‚¹åç§°: Substrate Node
âœ“ è¿è¡Œæ—¶ç‰ˆæœ¬æµ‹è¯• (3ms)
  â†’ Spec åç§°: stardust
  â†’ Spec ç‰ˆæœ¬: 100
âœ— æŸä¸ªæµ‹è¯• (50ms)                       â† çº¢è‰²å‰å·è¡¨ç¤ºå¤±è´¥
  é”™è¯¯ä¿¡æ¯: xxxxx

æµ‹è¯•ç»“æœ:
  é€šè¿‡: 24                               â† ç»¿è‰²æ•°å­—
  å¤±è´¥: 1                                â† çº¢è‰²æ•°å­—
  æ€»è€—æ—¶: 1234ms
```

### ç¬¦å·è¯´æ˜

| ç¬¦å· | é¢œè‰² | å«ä¹‰ |
|------|------|------|
| âœ“ | ç»¿è‰² | æµ‹è¯•é€šè¿‡ |
| âœ— | çº¢è‰² | æµ‹è¯•å¤±è´¥ |
| â†’ | é’è‰²/é»„è‰² | è¯¦ç»†ä¿¡æ¯æˆ–å­é¡¹ |
| â„¹ | è“è‰² | ä¸€èˆ¬ä¿¡æ¯ |
| âš  | é»„è‰² | è­¦å‘Šä¿¡æ¯ |

### æœ€ç»ˆæŠ¥å‘Š

æ‰€æœ‰æµ‹è¯•å®Œæˆåæ˜¾ç¤ºæ±‡æ€»æŠ¥å‘Šï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æœ€ç»ˆæµ‹è¯•æŠ¥å‘Š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ åŸºç¡€è®¾æ–½æµ‹è¯•: 25/25 é€šè¿‡
âœ“ ä½™é¢å’Œè½¬è´¦æµ‹è¯•: 13/13 é€šè¿‡
âœ“ å åœç³»ç»Ÿæµ‹è¯•: 20/20 é€šè¿‡
âœ“ èŠå¤©/ç›´æ’­ç³»ç»Ÿæµ‹è¯•: 18/18 é€šè¿‡
âœ“ äº¤æ˜“ç³»ç»Ÿæµ‹è¯•: 15/15 é€šè¿‡
âœ“ æ‰˜ç®¡/ä»²è£ç³»ç»Ÿæµ‹è¯•: 16/16 é€šè¿‡

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:
  é€šè¿‡: 107
  å¤±è´¥: 0
  æ€»è€—æ—¶: 8567ms

ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

---

## å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤

### é—®é¢˜ 1: è¿æ¥èŠ‚ç‚¹å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```
Error: Failed to connect to blockchain node
WebSocket connection to 'ws://localhost:9944' failed
```

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š
```bash
ps aux | grep solochain-template-node
```

2. å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨èŠ‚ç‚¹ï¼š
```bash
cd /home/xiaodong/æ¡Œé¢/stardust
./target/release/solochain-template-node --dev --tmp
```

3. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š
```bash
lsof -i :9944
```

4. å¦‚æœç«¯å£è¢«å ç”¨ï¼Œç»ˆæ­¢å ç”¨è¿›ç¨‹æˆ–æ›´æ¢ç«¯å£ã€‚

### é—®é¢˜ 2: æ¨¡å—ä¸å¯ç”¨

**ç°è±¡**:
```
Meihua.divine æ–¹æ³•ä¸å¯ç”¨ï¼Œè·³è¿‡æµ‹è¯•
```

**è¯´æ˜**:

è¿™é€šå¸¸ä¸æ˜¯é”™è¯¯ï¼Œè€Œæ˜¯å› ä¸ºï¼š
- è¯¥æ¨¡å—çš„ API æ–¹æ³•åç§°ä¸æµ‹è¯•è„šæœ¬ä¸­çš„ä¸ä¸€è‡´
- è¯¥æ¨¡å—åœ¨å½“å‰ runtime ç‰ˆæœ¬ä¸­å·²è¢«é‡å‘½åæˆ–ç§»é™¤

æµ‹è¯•ä¼šè‡ªåŠ¨è·³è¿‡ä¸å¯ç”¨çš„æ–¹æ³•å¹¶ç»§ç»­æ‰§è¡Œã€‚

**å¤„ç†**:

1. æ£€æŸ¥ runtime ä¸­çš„å®é™…æ–¹æ³•åï¼š
```bash
# ä½¿ç”¨ Polkadot.js Apps æŸ¥çœ‹
https://polkadot.js.org/apps/#/extrinsics?rpc=ws://localhost:9944
```

2. å¦‚éœ€è¦ï¼Œä¿®æ”¹æµ‹è¯•è„šæœ¬ä¸­çš„æ–¹æ³•åã€‚

### é—®é¢˜ 3: ä½™é¢ä¸è¶³

**é”™è¯¯ä¿¡æ¯**:
```
Error: InsufficientBalance
Error: ExistentialDeposit
```

**è§£å†³æ–¹æ¡ˆ**:

1. ç¡®ä¿ä½¿ç”¨ Alice æˆ– Bob è´¦æˆ·è¿›è¡Œæµ‹è¯•ï¼Œå®ƒä»¬æœ‰é¢„ç½®ä½™é¢ã€‚

2. æˆ–è€…ä½¿ç”¨è´¦æˆ·åˆ›å»ºè„šæœ¬è½¬è´¦ï¼š
```bash
npm run create-accounts
```

### é—®é¢˜ 4: äº¤æ˜“å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```
Error: Module.ErrorName: é”™è¯¯æè¿°
```

**å¤„ç†**:

1. æŸ¥çœ‹å…·ä½“çš„é”™è¯¯åç§°ï¼ˆå¦‚ `FirstPurchaseAlreadyCompleted`ï¼‰
2. ç†è§£é”™è¯¯å«ä¹‰ï¼ˆä¾‹å¦‚ï¼šè¯¥è´¦æˆ·å·²å®Œæˆé¦–è´­ï¼‰
3. æ ¹æ®ä¸šåŠ¡é€»è¾‘è°ƒæ•´æµ‹è¯•ç”¨ä¾‹

### é—®é¢˜ 5: npm å®‰è£…å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```
npm ERR! code ERESOLVE
npm ERR! ERESOLVE unable to resolve dependency tree
```

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ¸…é™¤ npm ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£…
npm install
```

### é—®é¢˜ 6: TypeScript é”™è¯¯

**é”™è¯¯ä¿¡æ¯**:
```
TypeError: Cannot read property 'xxx' of undefined
```

**å¯èƒ½åŸå› **:

1. API å°šæœªè¿æ¥å®Œæˆ
2. Pallet ä¸å­˜åœ¨æˆ–åç§°ä¸å¯¹

**è§£å†³æ–¹æ¡ˆ**:

ç¡®ä¿ API å·²æ­£ç¡®åˆå§‹åŒ–åå†è¿›è¡ŒæŸ¥è¯¢ã€‚

---

## æ‰©å±•å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹

åœ¨å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶ä¸­æ·»åŠ æµ‹è¯•å¯¹è±¡ï¼š

```typescript
// ä¾‹å¦‚åœ¨ test-divination.ts ä¸­æ·»åŠ 
{
  name: '[ModuleName] ä½ çš„æµ‹è¯•æè¿°',
  fn: async () => {
    // 1. å‡†å¤‡æµ‹è¯•æ•°æ®
    const testData = 'xxx';
    
    // 2. æ‰§è¡Œæ“ä½œ
    if (api.tx.moduleName && api.tx.moduleName.methodName) {
      const tx = api.tx.moduleName.methodName(testData);
      const result = await signAndSendTx(api, tx, accounts.alice);
      
      // 3. éªŒè¯ç»“æœ
      assert(result.success, `æ“ä½œåº”è¯¥æˆåŠŸ: ${result.error}`);
      log.subSection('æ“ä½œæˆåŠŸ');
    } else {
      log.subSection('æ–¹æ³•ä¸å¯ç”¨ï¼Œè·³è¿‡æµ‹è¯•');
    }
    
    // 4. æ–­è¨€
    assert(true, 'æµ‹è¯•å®Œæˆ');
  },
},
```

### åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶

1. åˆ›å»ºæ–‡ä»¶ `test-your-module.ts`ï¼š

```typescript
import { ApiPromise, Keyring } from '@polkadot/api';
import { KeyringPair } from '@polkadot/keyring/types';
import {
  initApi,
  getTestAccounts,
  log,
  runTestSuite,
  signAndSendTx,
  assert,
  TestSuiteResult,
  DEFAULT_WS_ENDPOINT,
} from './test-utils.js';

let api: ApiPromise;
let keyring: Keyring;
let accounts: { alice: KeyringPair; /* ... */ };

async function setup(): Promise<void> {
  log.section('åˆå§‹åŒ–æµ‹è¯•ç¯å¢ƒ...');
  api = await initApi(DEFAULT_WS_ENDPOINT);
  keyring = new Keyring({ type: 'sr25519' });
  accounts = getTestAccounts(keyring);
  log.success('æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–å®Œæˆ');
}

async function cleanup(): Promise<void> {
  if (api) {
    await api.disconnect();
    log.info('API è¿æ¥å·²æ–­å¼€');
  }
}

export async function runYourModuleTests(): Promise<TestSuiteResult> {
  await setup();

  const result = await runTestSuite('ä½ çš„æ¨¡å—æµ‹è¯•', [
    {
      name: 'æµ‹è¯•ç”¨ä¾‹ 1',
      fn: async () => {
        // æµ‹è¯•é€»è¾‘
        assert(true, 'æµ‹è¯•é€šè¿‡');
      },
    },
    // æ›´å¤šæµ‹è¯•ç”¨ä¾‹...
  ]);

  await cleanup();
  return result;
}

// ç›´æ¥è¿è¡Œæ”¯æŒ
const isMainModule = import.meta.url === `file://${process.argv[1]}`;
if (isMainModule) {
  runYourModuleTests()
    .then(result => process.exit(result.totalFailed > 0 ? 1 : 0))
    .catch(error => {
      console.error('æµ‹è¯•è¿è¡Œå¤±è´¥:', error);
      process.exit(1);
    });
}
```

2. åœ¨ `run-all-tests.ts` ä¸­æ³¨å†Œï¼š

```typescript
import { runYourModuleTests } from './test-your-module.js';

const testSuites: TestSuiteConfig[] = [
  // ... ç°æœ‰å¥—ä»¶
  {
    name: 'ä½ çš„æ¨¡å—æµ‹è¯•',
    run: runYourModuleTests,
    enabled: true,
  },
];
```

3. åœ¨ `package.json` ä¸­æ·»åŠ å‘½ä»¤ï¼š

```json
{
  "scripts": {
    "test:your-module": "tsx run-all-tests.ts --your-module",
    "test:yourmod": "tsx test-your-module.ts"
  }
}
```

### å·¥å…·å‡½æ•°è¯´æ˜

`test-utils.ts` æä¾›çš„ä¸»è¦å‡½æ•°ï¼š

| å‡½æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `initApi(endpoint)` | åˆå§‹åŒ– API è¿æ¥ | `const api = await initApi()` |
| `getTestAccounts(keyring)` | è·å–æµ‹è¯•è´¦æˆ· | `const { alice, bob } = getTestAccounts(keyring)` |
| `signAndSendTx(api, tx, signer)` | ç­¾åå¹¶å‘é€äº¤æ˜“ | `await signAndSendTx(api, tx, alice)` |
| `assert(condition, message)` | æ–­è¨€æ¡ä»¶ä¸ºçœŸ | `assert(value > 0, 'å€¼åº”å¤§äº0')` |
| `assertEqual(actual, expected)` | æ–­è¨€ç›¸ç­‰ | `assertEqual(result, expected)` |
| `assertGreaterThan(a, b)` | æ–­è¨€å¤§äº | `assertGreaterThan(balance, 0n)` |
| `formatBalance(balance)` | æ ¼å¼åŒ–ä½™é¢æ˜¾ç¤º | `formatBalance(1000000000000n)` â†’ `"1 DUST"` |
| `log.info/success/error/warn` | æ—¥å¿—è¾“å‡º | `log.success('æ“ä½œæˆåŠŸ')` |
| `sleep(ms)` | å»¶è¿Ÿç­‰å¾… | `await sleep(1000)` |
| `randomString(length)` | ç”Ÿæˆéšæœºå­—ç¬¦ä¸² | `randomString(8)` |

---

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. npm ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2026-01-19  
**ä½œè€…**: Stardust å¼€å‘å›¢é˜Ÿ

---

**ğŸŒŸ ç¥æµ‹è¯•é¡ºåˆ©ï¼**
