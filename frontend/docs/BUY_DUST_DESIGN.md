# è´­ä¹° DUST é¡µé¢è®¾è®¡æ–¹æ¡ˆ

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°æ˜Ÿå°˜ç„é‰´ App ä¸­"è´­ä¹° DUST"åŠŸèƒ½çš„é¡µé¢è®¾è®¡æ–¹æ¡ˆï¼ŒåŸºäº `pallets/trading/` æ¨¡å—å®ç°ã€‚

## ä¸šåŠ¡èƒŒæ™¯

### äº¤æ˜“æ¨¡å—æ¶æ„

```
pallets/trading/
â”œâ”€â”€ pallet-maker        # åšå¸‚å•†ç®¡ç†
â”œâ”€â”€ pallet-otc-order    # OTC è®¢å•ç®¡ç†
â”œâ”€â”€ pallet-bridge       # DUST â†” USDT æ¡¥æ¥
â””â”€â”€ pallet-trading-common # å…¬å…±å·¥å…·
```

### æ ¸å¿ƒä¸šåŠ¡è§„åˆ™

| è§„åˆ™ | è¯´æ˜ |
|------|------|
| é¦–è´­é‡‘é¢ | å›ºå®š 10 USD |
| æ™®é€šè®¢å• | 20-200 USD |
| æ”¯ä»˜æ–¹å¼ | USDT (TRC20) |
| è®¢å•è¶…æ—¶ | 30 åˆ†é’Ÿ |
| è¯æ®çª—å£ | è®¢å•å®Œæˆå 24 å°æ—¶ |

### è®¢å•çŠ¶æ€æµè½¬

```
Created â†’ Paid â†’ Released (å®Œæˆ)
    â†“       â†“
 Expired  Disputed â†’ Resolved
```

---

## é¡µé¢ç»“æ„

### 1. å…¥å£é¡µé¢ - è´­ä¹° DUST é¦–é¡µ

**è·¯å¾„**: `/wallet/buy-dust` æˆ– Modal

**åŠŸèƒ½**:
- æ˜¾ç¤ºå½“å‰ DUST ä»·æ ¼
- åˆ¤æ–­ç”¨æˆ·æ˜¯å¦é¦–è´­
- é€‰æ‹©åšå¸‚å•†
- è¾“å…¥è´­ä¹°é‡‘é¢

**UI ç»„ä»¶**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è´­ä¹° DUST                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ’° å½“å‰ä»·æ ¼                 â”‚   â”‚
â”‚  â”‚  1 DUST = 0.10 USDT         â”‚   â”‚
â”‚  â”‚  24h: +2.5%                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ é¦–è´­ç‰¹æƒ                  â”‚   â”‚
â”‚  â”‚  é¦–æ¬¡è´­ä¹°å›ºå®š 10 USD        â”‚   â”‚
â”‚  â”‚  äº«å—æ–°ç”¨æˆ·ä¸“å±ä»·æ ¼          â”‚   â”‚
â”‚  â”‚  [ç«‹å³é¦–è´­]                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€ æˆ–é€‰æ‹©åšå¸‚å•† â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤ åšå¸‚å•†A    â­4.9  1280å•  â”‚   â”‚
â”‚  â”‚ æº¢ä»·: +1.0%   åœ¨çº¿ ğŸŸ¢        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤ åšå¸‚å•†B    â­4.8  856å•   â”‚   â”‚
â”‚  â”‚ æº¢ä»·: +0.5%   åœ¨çº¿ ğŸŸ¢        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. é¦–è´­æµç¨‹é¡µé¢

**è·¯å¾„**: `/wallet/buy-dust/first-purchase`

**åŠŸèƒ½**:
- å›ºå®š 10 USD é‡‘é¢
- é€‰æ‹©åšå¸‚å•†
- æäº¤æ”¯ä»˜æ‰¿è¯º
- æ˜¾ç¤ºæ”¶æ¬¾ä¿¡æ¯

**UI ç»„ä»¶**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† é¦–æ¬¡è´­ä¹°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  è´­ä¹°é‡‘é¢                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  10.00 USD (å›ºå®š)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  é¢„è®¡è·å¾—                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â‰ˆ 100 DUST                  â”‚   â”‚
â”‚  â”‚  (å«é¦–è´­ä¼˜æƒ )                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  é€‰æ‹©åšå¸‚å•†                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â—‹ åšå¸‚å•†A  æº¢ä»·+1.0%  â­4.9  â”‚   â”‚
â”‚  â”‚ â— åšå¸‚å•†B  æº¢ä»·+0.5%  â­4.8  â”‚   â”‚
â”‚  â”‚ â—‹ åšå¸‚å•†C  æº¢ä»·+1.5%  â­4.7  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ’¡ é¦–è´­è¯´æ˜                 â”‚   â”‚
â”‚  â”‚  â€¢ æ¯ä¸ªè´¦æˆ·ä»…é™ä¸€æ¬¡é¦–è´­      â”‚   â”‚
â”‚  â”‚  â€¢ é‡‘é¢å›ºå®šä¸º 10 USD         â”‚   â”‚
â”‚  â”‚  â€¢ å®Œæˆé¦–è´­åå¯è¿›è¡Œæ™®é€šäº¤æ˜“  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       [åˆ›å»ºé¦–è´­è®¢å•]         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æ™®é€šè´­ä¹°é¡µé¢

**è·¯å¾„**: `/wallet/buy-dust/order`

**åŠŸèƒ½**:
- è¾“å…¥è´­ä¹°é‡‘é¢ (20-200 USD)
- é€‰æ‹©åšå¸‚å•†
- æ˜¾ç¤ºé¢„è®¡è·å¾— DUST
- åˆ›å»ºè®¢å•

**UI ç»„ä»¶**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è´­ä¹° DUST                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  è´­ä¹°é‡‘é¢ (USD)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [    50.00    ]             â”‚   â”‚
â”‚  â”‚  æœ€å° 20 | æœ€å¤§ 200          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  å¿«æ·é‡‘é¢                           â”‚
â”‚  [20] [50] [100] [200]             â”‚
â”‚                                     â”‚
â”‚  é¢„è®¡è·å¾—                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â‰ˆ 495.05 DUST               â”‚   â”‚
â”‚  â”‚  å•ä»·: 0.101 USDT/DUST       â”‚   â”‚
â”‚  â”‚  æº¢ä»·: +1.0%                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  é€‰æ‹©åšå¸‚å•†                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— åšå¸‚å•†A                    â”‚   â”‚
â”‚  â”‚   æº¢ä»· +1.0% | åœ¨çº¿ | â­4.9  â”‚   â”‚
â”‚  â”‚   å·²æœåŠ¡ 1280 ç”¨æˆ·           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       [åˆ›å»ºè®¢å•]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. è®¢å•è¯¦æƒ…/æ”¯ä»˜é¡µé¢

**è·¯å¾„**: `/wallet/buy-dust/order/[orderId]`

**åŠŸèƒ½**:
- æ˜¾ç¤ºè®¢å•ä¿¡æ¯
- æ˜¾ç¤ºåšå¸‚å•†æ”¶æ¬¾åœ°å€
- å€’è®¡æ—¶æç¤º
- æ ‡è®°å·²ä»˜æ¬¾
- å–æ¶ˆè®¢å•

**UI ç»„ä»¶**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è®¢å•è¯¦æƒ…                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â±ï¸ è¯·åœ¨ 28:45 å†…å®Œæˆä»˜æ¬¾    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  è®¢å•ä¿¡æ¯                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è®¢å•å·: #12345              â”‚   â”‚
â”‚  â”‚  çŠ¶æ€: å¾…ä»˜æ¬¾                â”‚   â”‚
â”‚  â”‚  é‡‘é¢: 50.00 USDT            â”‚   â”‚
â”‚  â”‚  æ•°é‡: 495.05 DUST           â”‚   â”‚
â”‚  â”‚  å•ä»·: 0.101 USDT            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  æ”¶æ¬¾ä¿¡æ¯                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ”¶æ¬¾åœ°å€ (TRC20)            â”‚   â”‚
â”‚  â”‚  TYASr5UV6HEcXatwdFQfmLVUqQQ â”‚   â”‚
â”‚  â”‚  [å¤åˆ¶åœ°å€]                  â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚  åšå¸‚å•†: åšå¸‚å•†A             â”‚   â”‚
â”‚  â”‚  å¾®ä¿¡: wechat_12345          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  âš ï¸ ä»˜æ¬¾æç¤º                 â”‚   â”‚
â”‚  â”‚  â€¢ è¯·ä½¿ç”¨ TRC20 ç½‘ç»œè½¬è´¦     â”‚   â”‚
â”‚  â”‚  â€¢ é‡‘é¢å¿…é¡»ç²¾ç¡®åŒ¹é…          â”‚   â”‚
â”‚  â”‚  â€¢ è¶…æ—¶æœªä»˜æ¬¾è®¢å•å°†è‡ªåŠ¨å–æ¶ˆ  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       [æˆ‘å·²ä»˜æ¬¾]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       [å–æ¶ˆè®¢å•]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. ç­‰å¾…æ”¾å¸é¡µé¢

**è·¯å¾„**: `/wallet/buy-dust/order/[orderId]/waiting`

**åŠŸèƒ½**:
- æ˜¾ç¤ºç­‰å¾…çŠ¶æ€
- è”ç³»åšå¸‚å•†
- ç”³è¯·ä»²è£å…¥å£

**UI ç»„ä»¶**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† ç­‰å¾…æ”¾å¸                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚           â³                        â”‚
â”‚     ç­‰å¾…åšå¸‚å•†ç¡®è®¤                  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è®¢å•å·: #12345              â”‚   â”‚
â”‚  â”‚  çŠ¶æ€: å·²ä»˜æ¬¾ï¼Œç­‰å¾…æ”¾å¸      â”‚   â”‚
â”‚  â”‚  é‡‘é¢: 50.00 USDT            â”‚   â”‚
â”‚  â”‚  æ•°é‡: 495.05 DUST           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åšå¸‚å•†é€šå¸¸åœ¨ 5-30 åˆ†é’Ÿå†…    â”‚   â”‚
â”‚  â”‚  ç¡®è®¤å¹¶é‡Šæ”¾ DUST             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       [è”ç³»åšå¸‚å•†]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é‡åˆ°é—®é¢˜ï¼Ÿ                  â”‚   â”‚
â”‚  â”‚  [ç”³è¯·ä»²è£]                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6. è®¢å•å®Œæˆé¡µé¢

**è·¯å¾„**: `/wallet/buy-dust/order/[orderId]/complete`

**åŠŸèƒ½**:
- æ˜¾ç¤ºäº¤æ˜“æˆåŠŸ
- æ˜¾ç¤ºè·å¾—çš„ DUST
- è¿”å›é’±åŒ…

**UI ç»„ä»¶**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚           âœ…                        â”‚
â”‚       äº¤æ˜“æˆåŠŸ                      â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ‚¨å·²æˆåŠŸè´­ä¹°                â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚     495.05 DUST              â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚  æ”¯ä»˜: 50.00 USDT            â”‚   â”‚
â”‚  â”‚  è®¢å•å·: #12345              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       [æŸ¥çœ‹é’±åŒ…]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       [ç»§ç»­è´­ä¹°]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ•°æ®æ¨¡å‹

### åšå¸‚å•†ä¿¡æ¯

```typescript
interface Maker {
  id: number;
  owner: string;           // è´¦æˆ·åœ°å€
  tronAddress: string;     // TRC20 æ”¶æ¬¾åœ°å€
  buyPremiumBps: number;   // ä¹°å…¥æº¢ä»· (åŸºç‚¹, -500~500)
  sellPremiumBps: number;  // å–å‡ºæº¢ä»·
  minAmount: bigint;       // æœ€å°äº¤æ˜“é‡‘é¢
  servicePaused: boolean;  // æœåŠ¡æš‚åœ
  usersServed: number;     // å·²æœåŠ¡ç”¨æˆ·æ•°
  maskedFullName: string;  // è„±æ•å§“å
  wechatId: string;        // å¾®ä¿¡å·
  rating: number;          // è¯„åˆ† (å‰ç«¯è®¡ç®—)
}
```

### è®¢å•ä¿¡æ¯

```typescript
interface Order {
  id: number;
  makerId: number;
  maker: string;           // åšå¸‚å•†è´¦æˆ·
  taker: string;           // ä¹°å®¶è´¦æˆ·
  price: bigint;           // å•ä»· (USDT/DUST, ç²¾åº¦ 10^6)
  qty: bigint;             // DUST æ•°é‡
  amount: bigint;          // USDT é‡‘é¢
  createdAt: number;       // åˆ›å»ºæ—¶é—´ (æ¯«ç§’)
  expireAt: number;        // è¶…æ—¶æ—¶é—´ (æ¯«ç§’)
  makerTronAddress: string;// æ”¶æ¬¾åœ°å€
  state: OrderState;       // è®¢å•çŠ¶æ€
  isFirstPurchase: boolean;// æ˜¯å¦é¦–è´­
}

enum OrderState {
  Created = 'Created',
  Paid = 'Paid',
  Released = 'Released',
  Cancelled = 'Cancelled',
  Disputed = 'Disputed',
  Resolved = 'Resolved',
}
```

---

## API è°ƒç”¨

### 1. æŸ¥è¯¢åšå¸‚å•†åˆ—è¡¨

```typescript
// è·å–æ‰€æœ‰æ´»è·ƒåšå¸‚å•†
const makers = await api.query.maker.makerApplications.entries();
const activeMakers = makers
  .filter(([_, app]) => app.status === 'Approved' && !app.servicePaused)
  .map(([key, app]) => ({
    id: key.args[0].toNumber(),
    ...app,
  }));
```

### 2. åˆ›å»ºé¦–è´­è®¢å•

```typescript
// ç”Ÿæˆæ”¯ä»˜æ‰¿è¯º (SHA256)
const paymentCommit = sha256(`${realName}|${idCard}|${phone}`);
const contactCommit = sha256(`${wechatId}|${phone}`);

await api.tx.otcOrder.createFirstPurchase(
  makerId,
  paymentCommit,
  contactCommit
).signAndSend(account);
```

### 3. åˆ›å»ºæ™®é€šè®¢å•

```typescript
await api.tx.otcOrder.createOrder(
  makerId,
  dustAmount,      // DUST æ•°é‡ (ç²¾åº¦ 10^12)
  paymentCommit,
  contactCommit
).signAndSend(account);
```

### 4. æ ‡è®°å·²ä»˜æ¬¾

```typescript
await api.tx.otcOrder.markPaid(
  orderId,
  epayTradeNo      // EPAY äº¤æ˜“å· (å¯é€‰)
).signAndSend(account);
```

### 5. å–æ¶ˆè®¢å•

```typescript
await api.tx.otcOrder.cancelOrder(orderId).signAndSend(account);
```

### 6. ç”³è¯·ä»²è£

```typescript
await api.tx.otcOrder.dispute(
  orderId,
  evidenceCid      // è¯æ® IPFS CID
).signAndSend(account);
```

---

## çŠ¶æ€ç®¡ç†

### Zustand Store

```typescript
// stores/tradingStore.ts
interface TradingState {
  // åšå¸‚å•†
  makers: Maker[];
  loadingMakers: boolean;
  
  // å½“å‰è®¢å•
  currentOrder: Order | null;
  orderHistory: Order[];
  
  // é¦–è´­çŠ¶æ€
  isFirstPurchase: boolean;
  
  // Actions
  fetchMakers: () => Promise<void>;
  createFirstPurchase: (makerId: number) => Promise<number>;
  createOrder: (makerId: number, amount: bigint) => Promise<number>;
  markPaid: (orderId: number) => Promise<void>;
  cancelOrder: (orderId: number) => Promise<void>;
  subscribeToOrder: (orderId: number) => void;
}
```

---

## æ–‡ä»¶ç»“æ„

```
frontend/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ wallet/
â”‚       â””â”€â”€ buy-dust/
â”‚           â”œâ”€â”€ index.tsx           # è´­ä¹°é¦–é¡µ
â”‚           â”œâ”€â”€ first-purchase.tsx  # é¦–è´­é¡µé¢
â”‚           â”œâ”€â”€ order.tsx           # åˆ›å»ºè®¢å•é¡µé¢
â”‚           â””â”€â”€ [orderId]/
â”‚               â”œâ”€â”€ index.tsx       # è®¢å•è¯¦æƒ…/æ”¯ä»˜
â”‚               â”œâ”€â”€ waiting.tsx     # ç­‰å¾…æ”¾å¸
â”‚               â””â”€â”€ complete.tsx    # äº¤æ˜“å®Œæˆ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â””â”€â”€ trading/
â”‚   â”‚       â”œâ”€â”€ components/
â”‚   â”‚       â”‚   â”œâ”€â”€ MakerCard.tsx       # åšå¸‚å•†å¡ç‰‡
â”‚   â”‚       â”‚   â”œâ”€â”€ MakerList.tsx       # åšå¸‚å•†åˆ—è¡¨
â”‚   â”‚       â”‚   â”œâ”€â”€ OrderCard.tsx       # è®¢å•å¡ç‰‡
â”‚   â”‚       â”‚   â”œâ”€â”€ AmountInput.tsx     # é‡‘é¢è¾“å…¥
â”‚   â”‚       â”‚   â”œâ”€â”€ PriceDisplay.tsx    # ä»·æ ¼æ˜¾ç¤º
â”‚   â”‚       â”‚   â””â”€â”€ CountdownTimer.tsx  # å€’è®¡æ—¶
â”‚   â”‚       â”œâ”€â”€ hooks/
â”‚   â”‚       â”‚   â”œâ”€â”€ useMakers.ts        # åšå¸‚å•†æ•°æ®
â”‚   â”‚       â”‚   â”œâ”€â”€ useOrder.ts         # è®¢å•æ“ä½œ
â”‚   â”‚       â”‚   â””â”€â”€ usePricing.ts       # ä»·æ ¼è®¡ç®—
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â””â”€â”€ stores/
â”‚       â””â”€â”€ tradingStore.ts
```

---

## ä¸»é¢˜æ ·å¼

```typescript
// ä¸»é¢˜è‰²
const THEME_COLOR = '#B2955D';
const THEME_COLOR_LIGHT = '#C9B07A';
const THEME_BG = '#F5F5F7';

// çŠ¶æ€è‰²
const SUCCESS_COLOR = '#4CD964';
const WARNING_COLOR = '#FF9500';
const ERROR_COLOR = '#FF3B30';

// è®¢å•çŠ¶æ€è‰²
const ORDER_STATUS_COLORS = {
  Created: '#FF9500',   // æ©™è‰² - å¾…ä»˜æ¬¾
  Paid: '#007AFF',      // è“è‰² - å·²ä»˜æ¬¾
  Released: '#4CD964',  // ç»¿è‰² - å·²å®Œæˆ
  Cancelled: '#8E8E93', // ç°è‰² - å·²å–æ¶ˆ
  Disputed: '#FF3B30',  // çº¢è‰² - äº‰è®®ä¸­
};
```

---

## å®‰å…¨è€ƒè™‘

1. **æ”¯ä»˜æ‰¿è¯ºå“ˆå¸Œ**: ä½¿ç”¨ SHA256 å¯¹æ•æ„Ÿä¿¡æ¯åŠ å¯†ï¼Œé“¾ä¸Šåªå­˜å‚¨å“ˆå¸Œ
2. **è®¢å•è¶…æ—¶**: 30 åˆ†é’Ÿæœªä»˜æ¬¾è‡ªåŠ¨å–æ¶ˆï¼Œé˜²æ­¢æ¶æ„å ç”¨
3. **è¯æ®çª—å£**: è®¢å•å®Œæˆå 24 å°æ—¶å†…å¯æäº¤äº‰è®®è¯æ®
4. **åšå¸‚å•†æŠ¼é‡‘**: åšå¸‚å•†éœ€é”å®š 1000 USD ç­‰å€¼æŠ¼é‡‘ä½œä¸ºæ‹…ä¿

---

## é”™è¯¯å¤„ç†

### 1. ç½‘ç»œé”™è¯¯å¤„ç†

```typescript
// hooks/useChainConnection.ts
interface ConnectionState {
  isConnected: boolean;
  isReconnecting: boolean;
  retryCount: number;
  lastError: string | null;
}

const MAX_RETRY = 5;
const RETRY_DELAY = [1000, 2000, 4000, 8000, 16000]; // æŒ‡æ•°é€€é¿

async function connectWithRetry(): Promise<ApiPromise> {
  let retryCount = 0;
  
  while (retryCount < MAX_RETRY) {
    try {
      const provider = new WsProvider(WS_ENDPOINT);
      const api = await ApiPromise.create({ provider });
      await api.isReady;
      return api;
    } catch (error) {
      retryCount++;
      if (retryCount >= MAX_RETRY) {
        throw new Error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•');
      }
      await sleep(RETRY_DELAY[retryCount - 1]);
    }
  }
}

// æ–­çº¿é‡è¿ç›‘å¬
api.on('disconnected', () => {
  showToast('ç½‘ç»œå·²æ–­å¼€ï¼Œæ­£åœ¨é‡è¿...');
  reconnect();
});

api.on('error', (error) => {
  console.error('Chain error:', error);
  showToast('ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•');
});
```

**ç”¨æˆ·æç¤º UI**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ ç½‘ç»œè¿æ¥å¤±è´¥                    â”‚
â”‚                                     â”‚
â”‚  æ— æ³•è¿æ¥åˆ°åŒºå—é“¾ç½‘ç»œ               â”‚
â”‚  è¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥                 â”‚
â”‚                                     â”‚
â”‚  [é‡è¯•è¿æ¥]     [ç¨åå†è¯•]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. äº¤æ˜“å¤±è´¥é‡è¯•æœºåˆ¶

```typescript
// utils/transaction.ts
interface TxResult {
  success: boolean;
  txHash?: string;
  blockHash?: string;
  error?: TxError;
}

interface TxError {
  code: string;
  message: string;
  isRetryable: boolean;
}

// å¯é‡è¯•çš„é”™è¯¯ç±»å‹
const RETRYABLE_ERRORS = [
  'Priority is too low',      // äº¤æ˜“ä¼˜å…ˆçº§è¿‡ä½
  'Transaction is outdated',  // äº¤æ˜“è¿‡æœŸ
  'Unable to retrieve nonce', // Nonce è·å–å¤±è´¥
  'Connection timeout',       // è¿æ¥è¶…æ—¶
];

async function submitTxWithRetry(
  tx: SubmittableExtrinsic,
  account: KeyringPair,
  maxRetry = 3
): Promise<TxResult> {
  let lastError: TxError | null = null;
  
  for (let i = 0; i < maxRetry; i++) {
    try {
      const result = await new Promise<TxResult>((resolve, reject) => {
        tx.signAndSend(account, ({ status, events, dispatchError }) => {
          if (status.isInBlock) {
            if (dispatchError) {
              const error = parseDispatchError(dispatchError);
              if (RETRYABLE_ERRORS.some(e => error.message.includes(e))) {
                reject({ ...error, isRetryable: true });
              } else {
                resolve({ success: false, error });
              }
            } else {
              resolve({
                success: true,
                txHash: tx.hash.toHex(),
                blockHash: status.asInBlock.toHex(),
              });
            }
          }
        });
      });
      return result;
    } catch (error) {
      lastError = error as TxError;
      if (!lastError.isRetryable || i === maxRetry - 1) {
        break;
      }
      await sleep(1000 * (i + 1)); // é€’å¢å»¶è¿Ÿ
    }
  }
  
  return { success: false, error: lastError };
}

// è§£æé“¾ä¸Šé”™è¯¯
function parseDispatchError(dispatchError: DispatchError): TxError {
  if (dispatchError.isModule) {
    const decoded = api.registry.findMetaError(dispatchError.asModule);
    return {
      code: `${decoded.section}.${decoded.name}`,
      message: decoded.docs.join(' '),
      isRetryable: false,
    };
  }
  return {
    code: 'Unknown',
    message: dispatchError.toString(),
    isRetryable: false,
  };
}
```

**å¸¸è§äº¤æ˜“é”™è¯¯å¤„ç†**:

| é”™è¯¯ç  | è¯´æ˜ | ç”¨æˆ·æç¤º | å¤„ç†æ–¹å¼ |
|--------|------|----------|----------|
| `OtcOrder.MakerNotFound` | åšå¸‚å•†ä¸å­˜åœ¨ | è¯¥åšå¸‚å•†å·²ä¸‹çº¿ | åˆ·æ–°åˆ—è¡¨ |
| `OtcOrder.MakerServicePaused` | åšå¸‚å•†æš‚åœæœåŠ¡ | åšå¸‚å•†æš‚åœæœåŠ¡ | é€‰æ‹©å…¶ä»–åšå¸‚å•† |
| `OtcOrder.InsufficientBalance` | ä½™é¢ä¸è¶³ | åšå¸‚å•†ä½™é¢ä¸è¶³ | é€‰æ‹©å…¶ä»–åšå¸‚å•† |
| `OtcOrder.AmountTooLow` | é‡‘é¢è¿‡ä½ | é‡‘é¢ä¸èƒ½ä½äº 20 USD | è°ƒæ•´é‡‘é¢ |
| `OtcOrder.AmountTooHigh` | é‡‘é¢è¿‡é«˜ | é‡‘é¢ä¸èƒ½è¶…è¿‡ 200 USD | è°ƒæ•´é‡‘é¢ |
| `OtcOrder.OrderExpired` | è®¢å•å·²è¿‡æœŸ | è®¢å•å·²è¶…æ—¶ | é‡æ–°åˆ›å»ºè®¢å• |
| `OtcOrder.AlreadyFirstPurchased` | å·²å®Œæˆé¦–è´­ | æ‚¨å·²å®Œæˆé¦–è´­ | è·³è½¬æ™®é€šè´­ä¹° |
| `Balances.InsufficientBalance` | Gas ä¸è¶³ | è´¦æˆ·ä½™é¢ä¸è¶³æ”¯ä»˜æ‰‹ç»­è´¹ | å……å€¼ DUST |

**é”™è¯¯æç¤º UI**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ äº¤æ˜“å¤±è´¥                        â”‚
â”‚                                     â”‚
â”‚  é”™è¯¯: OtcOrder.MakerServicePaused  â”‚
â”‚  åšå¸‚å•†æš‚åœæœåŠ¡ï¼Œè¯·é€‰æ‹©å…¶ä»–åšå¸‚å•†   â”‚
â”‚                                     â”‚
â”‚  [é€‰æ‹©å…¶ä»–åšå¸‚å•†]    [å–æ¶ˆ]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. åšå¸‚å•†ç¦»çº¿å¤„ç†

```typescript
// hooks/useMakerStatus.ts
interface MakerStatus {
  isOnline: boolean;
  lastActiveAt: number;
  responseTime: number;  // å¹³å‡å“åº”æ—¶é—´(åˆ†é’Ÿ)
  servicePaused: boolean;
}

// åšå¸‚å•†åœ¨çº¿çŠ¶æ€åˆ¤æ–­
function checkMakerOnline(maker: Maker): MakerStatus {
  const now = Date.now();
  const lastActive = maker.lastActiveAt || 0;
  const offlineThreshold = 30 * 60 * 1000; // 30åˆ†é’Ÿæ— æ´»åŠ¨è§†ä¸ºç¦»çº¿
  
  return {
    isOnline: (now - lastActive) < offlineThreshold && !maker.servicePaused,
    lastActiveAt: lastActive,
    responseTime: maker.avgResponseTime || 15,
    servicePaused: maker.servicePaused,
  };
}

// åšå¸‚å•†åˆ—è¡¨æ’åº (åœ¨çº¿ä¼˜å…ˆ)
function sortMakers(makers: Maker[]): Maker[] {
  return makers.sort((a, b) => {
    const statusA = checkMakerOnline(a);
    const statusB = checkMakerOnline(b);
    
    // 1. åœ¨çº¿ä¼˜å…ˆ
    if (statusA.isOnline !== statusB.isOnline) {
      return statusA.isOnline ? -1 : 1;
    }
    // 2. å“åº”æ—¶é—´çŸ­ä¼˜å…ˆ
    if (statusA.responseTime !== statusB.responseTime) {
      return statusA.responseTime - statusB.responseTime;
    }
    // 3. æº¢ä»·ä½ä¼˜å…ˆ
    return a.buyPremiumBps - b.buyPremiumBps;
  });
}
```

**åšå¸‚å•†çŠ¶æ€ UI**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ åšå¸‚å•†A                          â”‚
â”‚ ğŸŸ¢ åœ¨çº¿ Â· å¹³å‡å“åº” 5 åˆ†é’Ÿ           â”‚
â”‚ æº¢ä»· +1.0% | â­4.9 | 1280å•         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ åšå¸‚å•†B                          â”‚
â”‚ ğŸŸ¡ ç¦»çº¿ Â· æœ€åæ´»è·ƒ 2å°æ—¶å‰          â”‚
â”‚ æº¢ä»· +0.5% | â­4.8 | 856å•          â”‚
â”‚ âš ï¸ åšå¸‚å•†å¯èƒ½æ— æ³•åŠæ—¶å“åº”           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ åšå¸‚å•†C                          â”‚
â”‚ ğŸ”´ æš‚åœæœåŠ¡                         â”‚
â”‚ æº¢ä»· +1.5% | â­4.7 | 623å•          â”‚
â”‚ [ä¸å¯é€‰æ‹©]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é€‰æ‹©ç¦»çº¿åšå¸‚å•†æ—¶çš„è­¦å‘Š**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ åšå¸‚å•†å½“å‰ç¦»çº¿                  â”‚
â”‚                                     â”‚
â”‚  è¯¥åšå¸‚å•†æœ€åæ´»è·ƒäº 2 å°æ—¶å‰ï¼Œ      â”‚
â”‚  å¯èƒ½æ— æ³•åŠæ—¶å¤„ç†æ‚¨çš„è®¢å•ã€‚         â”‚
â”‚                                     â”‚
â”‚  å»ºè®®é€‰æ‹©åœ¨çº¿çš„åšå¸‚å•†ä»¥è·å¾—         â”‚
â”‚  æ›´å¿«çš„äº¤æ˜“ä½“éªŒã€‚                   â”‚
â”‚                                     â”‚
â”‚  [é€‰æ‹©å…¶ä»–åšå¸‚å•†]  [ä»ç„¶é€‰æ‹©]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. è¶…æ—¶è®¢å•ç”¨æˆ·æç¤º

```typescript
// hooks/useOrderTimeout.ts
interface TimeoutState {
  remainingTime: number;    // å‰©ä½™æ—¶é—´(ç§’)
  isExpiringSoon: boolean;  // å³å°†è¶…æ—¶ (<5åˆ†é’Ÿ)
  isExpired: boolean;       // å·²è¶…æ—¶
}

function useOrderTimeout(order: Order): TimeoutState {
  const [state, setState] = useState<TimeoutState>({
    remainingTime: 0,
    isExpiringSoon: false,
    isExpired: false,
  });
  
  useEffect(() => {
    const timer = setInterval(() => {
      const now = Date.now();
      const remaining = Math.max(0, order.expireAt - now);
      const remainingSec = Math.floor(remaining / 1000);
      
      setState({
        remainingTime: remainingSec,
        isExpiringSoon: remainingSec > 0 && remainingSec < 300, // 5åˆ†é’Ÿ
        isExpired: remainingSec === 0,
      });
      
      // è¶…æ—¶æé†’
      if (remainingSec === 300) {
        showNotification('è®¢å•å³å°†è¶…æ—¶', 'è¯·åœ¨ 5 åˆ†é’Ÿå†…å®Œæˆä»˜æ¬¾');
      }
      if (remainingSec === 60) {
        showNotification('è®¢å•å³å°†è¶…æ—¶', 'è¯·åœ¨ 1 åˆ†é’Ÿå†…å®Œæˆä»˜æ¬¾');
      }
    }, 1000);
    
    return () => clearInterval(timer);
  }, [order.expireAt]);
  
  return state;
}

// æ ¼å¼åŒ–å‰©ä½™æ—¶é—´
function formatRemainingTime(seconds: number): string {
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}
```

**è¶…æ—¶æç¤º UI çŠ¶æ€**:

æ­£å¸¸çŠ¶æ€ (>5åˆ†é’Ÿ):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â±ï¸ è¯·åœ¨ 25:30 å†…å®Œæˆä»˜æ¬¾           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å³å°†è¶…æ—¶ (<5åˆ†é’Ÿ):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ è®¢å•å³å°†è¶…æ—¶ï¼                  â”‚
â”‚  è¯·åœ¨ 04:30 å†…å®Œæˆä»˜æ¬¾              â”‚
â”‚  è¶…æ—¶åè®¢å•å°†è‡ªåŠ¨å–æ¶ˆ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å·²è¶…æ—¶:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ è®¢å•å·²è¶…æ—¶                      â”‚
â”‚                                     â”‚
â”‚  è®¢å• #12345 å·²å› è¶…æ—¶è‡ªåŠ¨å–æ¶ˆ       â”‚
â”‚  æ‚¨å¯ä»¥é‡æ–°åˆ›å»ºè®¢å•                 â”‚
â”‚                                     â”‚
â”‚  [é‡æ–°è´­ä¹°]        [è¿”å›é¦–é¡µ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç­‰å¾…æ”¾å¸è¶…æ—¶å¤„ç†**:

```typescript
// å·²ä»˜æ¬¾ä½†åšå¸‚å•†æœªæ”¾å¸çš„è¶…æ—¶å¤„ç†
const RELEASE_TIMEOUT = 2 * 60 * 60 * 1000; // 2å°æ—¶

function useReleaseTimeout(order: Order) {
  const paidAt = order.paidAt;
  const [canDispute, setCanDispute] = useState(false);
  
  useEffect(() => {
    if (order.state !== 'Paid' || !paidAt) return;
    
    const checkTimeout = () => {
      const elapsed = Date.now() - paidAt;
      if (elapsed > RELEASE_TIMEOUT) {
        setCanDispute(true);
        showNotification(
          'æ”¾å¸è¶…æ—¶æé†’',
          'åšå¸‚å•†è¶…è¿‡2å°æ—¶æœªæ”¾å¸ï¼Œæ‚¨å¯ä»¥ç”³è¯·ä»²è£'
        );
      }
    };
    
    const timer = setInterval(checkTimeout, 60000);
    checkTimeout();
    
    return () => clearInterval(timer);
  }, [order.state, paidAt]);
  
  return { canDispute };
}
```

**æ”¾å¸è¶…æ—¶æç¤º UI**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ åšå¸‚å•†å“åº”è¶…æ—¶                  â”‚
â”‚                                     â”‚
â”‚  æ‚¨å·²ä»˜æ¬¾è¶…è¿‡ 2 å°æ—¶ï¼Œ              â”‚
â”‚  åšå¸‚å•†ä»æœªé‡Šæ”¾ DUSTã€‚              â”‚
â”‚                                     â”‚
â”‚  æ‚¨å¯ä»¥ï¼š                           â”‚
â”‚  1. ç»§ç»­ç­‰å¾…åšå¸‚å•†å¤„ç†              â”‚
â”‚  2. è”ç³»åšå¸‚å•†å‚¬ä¿ƒ                  â”‚
â”‚  3. ç”³è¯·å¹³å°ä»²è£                    â”‚
â”‚                                     â”‚
â”‚  [è”ç³»åšå¸‚å•†]      [ç”³è¯·ä»²è£]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. å…¨å±€é”™è¯¯è¾¹ç•Œ

```typescript
// components/ErrorBoundary.tsx
class TradingErrorBoundary extends React.Component {
  state = { hasError: false, error: null };
  
  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }
  
  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    // ä¸ŠæŠ¥é”™è¯¯æ—¥å¿—
    reportError({
      error: error.message,
      stack: error.stack,
      componentStack: errorInfo.componentStack,
      page: 'trading',
    });
  }
  
  render() {
    if (this.state.hasError) {
      return (
        <View style={styles.errorContainer}>
          <Ionicons name="warning" size={48} color="#FF3B30" />
          <Text style={styles.errorTitle}>é¡µé¢å‡ºé”™äº†</Text>
          <Text style={styles.errorMessage}>
            äº¤æ˜“æ¨¡å—åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•
          </Text>
          <Pressable 
            style={styles.retryButton}
            onPress={() => this.setState({ hasError: false })}
          >
            <Text style={styles.retryText}>é‡è¯•</Text>
          </Pressable>
        </View>
      );
    }
    return this.props.children;
  }
}
```

---

## åç»­ä¼˜åŒ–

1. **EPAY é›†æˆ**: æ”¯æŒ EPAY è‡ªåŠ¨æ”¯ä»˜
2. **ä»·æ ¼æé†’**: ä»·æ ¼æ³¢åŠ¨é€šçŸ¥
3. **æ‰¹é‡è´­ä¹°**: å¤§é¢è®¢å•æ‹†åˆ†
4. **åšå¸‚å•†è¯„ä»·**: äº¤æ˜“å®Œæˆåè¯„ä»·ç³»ç»Ÿ
