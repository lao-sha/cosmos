# Cosmos 移动端开发路线图 (Roadmap)

根据技术设计和需求映射，我们将移动端开发分为六个阶段，旨在从基础架构逐步演进到完整的 Web3 业务功能。

---

## 阶段 1：基础设施与环境搭建 (第 1-2 周)
**目标**：建立可运行的 Expo 环境及基础分层架构。

1.  **项目初始化**：
    *   使用 `npx create-expo-app@latest` (Tabs 模板)。
    *   配置 TypeScript 严格模式及路径别名 (`@/*`)。
2.  **样式与主题配置**：
    *   安装并配置 `NativeWind` (Tailwind CSS)。
    *   根据设计规范定义 `Design Tokens` (颜色、字体、间距)。
3.  **基础架构层搭建**：
    *   设置 `src/api`：初始化 `@polkadot/api` Provider。
    *   设置 `src/stores`：定义基础的 Zustand Store (UI, Auth)。
    *   设置 `src/services`：建立 RPC 节点轮询及故障转移逻辑。
4.  **DevOps 设置**：
    *   配置 `eas.json` (development, preview, production)。
    *   设置 GitHub Actions 基础 CI 流程。

---

## 阶段 2：身份认证与 Web3 钱包 (第 3-4 周)
**目标**：实现用户身份上链及私钥安全管理。

1.  **钱包核心功能**：
    *   实现助记词生成、导入、导出。
    *   集成 `Expo SecureStore` 进行私钥硬件级存储。
    *   实现生物识别 (`expo-local-authentication`) 二次验证。
2.  **链上身份连接**：
    *   调用 `pallet-chat-core` 进行用户注册与资料初始化。
    *   实现账户余额查询及基础转账。
3.  **加密库封装**：
    *   封装客户端加密工具类 (AES-GCM)，用于后续占卜隐私数据。

---

## 阶段 3：核心业务 - 占卜与社交基础 (第 5-8 周)
**目标**：完成项目最具特色的业务板块逻辑。

1.  **占卜模块 (Divination)**：
    *   开发八字排盘表单 (多步骤输入)。
    *   实现本地计算逻辑及 Lottie 动效。
    *   调用 `pallet-divination-bazi` 实现结果上链与加密记录。
2.  **婚恋与社交 (Matchmaking)**：
    *   开发卡片滑动组件 (`Reanimated 3`)。
    *   实现基于 IPFS 的头像/资料图片上传流程。
    *   对接 `pallet-matchmaking-profile` 资料读写。
3.  **即时通讯 (Chat)**：
    *   集成 `pallet-chat-core` 实现消息收发。
    *   实现本地乐观 UI 更新，保证聊天流畅度。

---

## 阶段 4：交易、市场与 IPFS 进阶 (第 9-11 周)
**目标**：完善去中心化交易与存储管理。

1.  **交易与市场 (Trading)**：
    *   开发代币兑换 (Swap) 界面与逻辑。
    *   实现 OTC 广告列表、下单及托管流程。
2.  **IPFS 存储管理**：
    *   开发存储管理仪表盘，显示已用空间与配额。
3.  **仲裁与证据 (Arbitration)**：
    *   实现争议申诉表单与证据上传流程。

---

## 阶段 5：性能优化、安全审计与测试 (第 12-14 周)
**目标**：确保应用达到生产环境标准。

1.  **性能专项优化**：
    *   大列表优化 (`FlashList`)。
    *   图片懒加载与 WebP 格式适配。
    *   Bundle Size 分析与分包加载。
2.  **安全审计**：
    *   进行私钥泄露模拟测试。
    *   验证 Web 端 CSP 配置及 XSS 防护。
3.  **全面测试**：
    *   编写关键业务逻辑的单元测试 (`Jest`)。
    *   进行主要业务路径的集成测试。

---

## 阶段 6：发布与迭代 (第 15 周+)
**目标**：提交商店并开启 OTA 更新。

1.  **商店发布**：
    *   使用 EAS Build 生成 `.ipa` 和 `.aab`。
    *   提交 App Store 和 Google Play 审核。
2.  **热更新配置**：
    *   配置 Expo Updates，实现紧急 Bug 的静默修复。
3.  **数据监控**：
    *   集成性能监控与用户行为分析 (Sentry/Mixpanel)。

---

## 关键成功指标 (KPIs)
- **安全性**：私钥不离开安全沙盒，敏感数据 100% 链前加密。
- **性能**：关键页面加载 < 2s，动画保持 60 FPS。
- **一致性**：Mobile 与 Web 功能及样式还原度 > 95%。

