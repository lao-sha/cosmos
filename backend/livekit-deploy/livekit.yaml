# LiveKit 服务器配置文件

# 服务端口
port: 7880
bind_addresses:
  - "0.0.0.0"

# RTC 配置
rtc:
  # UDP 端口范围（用于 WebRTC 媒体传输）
  port_range_start: 50000
  port_range_end: 50100
  
  # 使用外部 IP（重要！NAT 穿透需要）
  use_external_ip: true
  
  # 如果有固定公网 IP，在这里配置
  # external_ip: "your.public.ip.address"
  
  # TCP 回退端口（防火墙限制 UDP 时使用）
  tcp_port: 7881
  
  # TURN 服务器配置
  turn_servers:
    - host: 0.0.0.0
      port: 3478
      protocol: udp
      # 可选: 添加 TCP TURN
      # - host: 0.0.0.0
      #   port: 3478
      #   protocol: tcp

# API 密钥配置
# 格式: API_KEY: API_SECRET
# 生成方式:
#   API_KEY: openssl rand -hex 16
#   API_SECRET: openssl rand -base64 32
keys:
  devkey: secret
  # 生产环境请替换为真实密钥
  # APIa1b2c3d4e5f6g7h8: c2VjcmV0a2V5MTIzNDU2Nzg5MGFiY2RlZg==

# 日志配置
logging:
  level: info
  # 可选级别: debug, info, warn, error
  # 开发环境可以使用 debug
  # 生产环境建议使用 info 或 warn

# Redis 配置（可选，用于多实例负载均衡）
# redis:
#   address: redis:6379
#   password: ""  # 如果 Redis 有密码
#   db: 0

# 房间配置
room:
  # 自动创建房间
  auto_create: true
  
  # 空房间自动关闭时间（秒）
  # 房间内没有参与者后，等待多久关闭
  empty_timeout: 300  # 5 分钟
  
  # 房间最大参与者数量
  max_participants: 100
  
  # 房间最大持续时间（秒）
  # 0 表示无限制
  max_duration: 0

# 限流配置
limit:
  # 每秒最大字节数（带宽限制）
  bytes_per_sec: 10000000  # 10 MB/s
  
  # 每个参与者的最大比特率
  # video_bitrate: 3000000  # 3 Mbps

# 音视频编解码器配置
audio:
  # 音频编解码器优先级
  codecs:
    - opus
  
video:
  # 视频编解码器优先级
  codecs:
    - vp8
    - h264
    - vp9

# 开发模式（生产环境设置为 false）
dev_mode: true

# CORS 配置（如果需要）
# cors:
#   allow_origins:
#     - "*"
#   allow_methods:
#     - GET
#     - POST
#   allow_headers:
#     - Content-Type
